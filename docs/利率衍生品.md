---
title: "利率衍生品"
output: html_document
toc: false
mainfont: msyh
use_math: true
categories: [hide]
tags: [finance,金融,利率,衍生品,期权,随机过程]
---
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
在此前提到衍生品的时候，对于利率，我们假设的是它是一个时间的函数 $r(t)$，是个定值。然而，如果涉及到利率类衍生品，需要它“随机”起来，并不是那么直观的，需要一点分析：不同于股票的价格，自己是一个可交易、可观测变量，我们可对其随机过程进行建模。利率本身不是一个可交易量，我们可以交易的基础其实是未来现金流的现值。

## 利率过程的基础假设
先简单的看一个两步两状态过程。假设有现金流$1$分别发生在时间$t_1$和时间$t_2, 0<t_1<t_2$，这两笔现金流在$0$时刻有市场价格$p(0,t_1),p(0,t_2)$。计$\mathscr{r}(d,t)=-\mathrm{ln}(d/t)$($d$ for discount)。我们会分别称$\mathscr{r}(p(0,t_1),t_1),\mathscr{r}(p(0,t_2),t_2)$为即期利率。

市场是会有波动的。那么，我们可以期待 $p(t_1,t_2)$不是一个定值(注意$p(t_1,t_2)$不是指$0$时刻看到的远期价格 which is a 定值，而是指在 $t_1$将看到的$t_2$的现金流的价格。)，而是一个随机变量。那么，再从另一个角度来看$p(0,t_2)$，它应该是$p(t_1,t_2)$的**某种**期望。于是满足:
$$
\begin{eqnarray*}
p(0,t_2) = \mathscr{E}(p(t_1,t_2)p(0,t_1))
\end{eqnarray*}
$$
此处，说明白这个“某种”期望，是指的什么: 什么$\sigma$代数，什么测度？
* 取$\sigma$代数为 adapt to $p(t_1,t_2)$的一个。
* 取指向$\sigma$代数中元素的 arrow security (即 $p(t_1,t_2)$ 落到某元素则支付$1$，其它支付$0$的假想证券)的$0$时刻的价格为$\mathscr{p}$。
* 可以看到(不严谨的说)：
  1. 若每个arrow security持有一份，其payoff就是任何情况下为$1$，所以其总价值应该就是 $p(0,t_1)$。可见 arrow security 的价格除以$p(0,t_1)$，形成一个测度。
  2. 若每个arrow security持有$p(t_1,t_2)$份，其payoff在任何情况下就是和$t_2$时$1$的现金流在$t_1$时的估值一致。于是，上面说的测度就是 the 测度我们求期望有时候要的。
* 注意，这是我们需要的最粗的一个测度，要是有更细的，也是可以的。

上面的过程可以容易的扩展到$p(0,t_n) = \mathscr{E}(\prod\limits_{i=1}^n p(t_{i-1},t_i))$。

下面观察$p(t_1,t_2)$，它应该有什么属性呢？
* 在$t_1 \to t_2$时，它应该趋于$1$，而在$t_1\to 0$时，它应该趋于$p(0,t_2)$，为一个定值。
* 在取消随机性之后，$p(t_1,t_2)$是定值，应该回复到利率为时间的函数的经典情况，其中包括要求$\lim \limits_{\delta t \to 0} p(t,t+\delta t)/\delta t $ 存在。
* $p(0,t)$和$p(t^{\prime},t^\prime+t)$的差距的分布，应该随$t^{\prime}$的增大而变宽。

结合前面提到的$p(0,t_n)$的式子，可以取$r_s(t) := \lim \limits_{\delta t \to 0} p(t,t+\delta t)/\delta t $

### 利率
由上，我们终于得到了常说的**利率**：
即期利率 $r(t) = \mathscr{r} (p(0,t),t) = \mathscr{r}(\lim \limits_{(t_i-t_{i-1}) \to 0}\mathscr{E}(\prod\limits_i^n p(t_{i-1},t_i)); t_n = t, t)$。从而：
$$
\begin{eqnarray*}
r(t) = \mathscr{r} (\mathscr{E} (e^ {\int \limits_{0}^{t} r_s(s)\mathrm{d}s}),t)
\end{eqnarray*}
$$
远期利率之类的在此基础上可以同原有推导，就不罗嗦了。

现在我们期待用$r_s(t)$服从的随机过程来作为构建的基础。

#### 短期利率模型
短期利率模型有Visicek模型，Cox-Ingersoll-Ross模型，Hull-White模型等。这类模型都有一个共同的结构：
$$
\begin{eqnarray*}
\mathrm{d} r_s = M(\textbf{c},r_s,t)\mathrm{d}t + \sigma(\textbf{b},r_s,t)\mathrm{d}W
\end{eqnarray*}
$$
甚至是：
$$
\begin{eqnarray*}
\mathrm{d} r_s = M(\textbf{c}(r_s,t),r_s,t)\mathrm{d}t + \sigma(\textbf{b}(r_s,t),r_s,t)\mathrm{d}W
\end{eqnarray*}
$$
的形式。
其中，$ \textbf{c,b}$是两组 **参数**。在给定这些参数之后，根据$r_s(0)$的值，整个$r_s$的随机过程就确定下来了。
下面，来观察应用的情况：
* 我们会在某时点$0$，根据可观测的市场情况校准$ \textbf{c,b}$。
* 根据$ \textbf{c,b}$确定的随机过程，各种求期望来进行估值。

容易发现，这会有一个严重的问题。在$0$时点，我们已经校准好了参数$ \textbf{c,b}$。那么到了时间$1$，$r_s(1)$已经是一个可以观测的确定量，加上参数从而$r_s(1+)$也就是确定的了。进而，可以计算出整个市场的情况。然而，在时间$1$，新的市场会是一个可观测量，同计算值会有矛盾。


#### 合理的利率模型
分析前面的矛盾，有如下的目标和问题：
* 目标是在每一个时点可以适配当时的市场，但是又可以有一定意义上的预期。
* 问题是模型不能对于“利率期限结构”的决定的确定性的。
* 通过$r_s(t)$表达的基本结构是不能丢弃的，因为基础的假设仍然成立的。那么我们需要这个随机过程不能由仅由参数和$r_s$的初值来完全的确定。

这说明$r_s(t)$自身应该不足以表示确定的状态，它对应的filtration不够细，于是，最简单的想法是再把它分细。以$(r_s(t),\textbf{q})$来表达状态。另外$r_s(t)$不一定要符合一个前述的增量过程，但是又要保持连续。通过参数$\textbf{q}$应该能覆盖所有可能的利率期限结构。注意到刚才的模型中，其实是可以适应观测点瞬时利率的，那自然的扩展是通过增加远期利率来分细这个filtration。同时，需要再分析是否有什么新的约束。

具体来说，我们要：
* 找到一个模型，能够适配随时观察到的各债券的价格。
* 我们需要的模型，应该是在风险中性测度下的影响关系，目的是在衍生品估值的时候好直接求“期望”。而真实测度下，其实比较随意，因为只要能通过等价测度变到风险中性就行，而这个要求很弱。

最基础的要求是：
$$
\begin{eqnarray*}
p(t,T) &=& p(t,s) \mathscr{E}(p(s,T)) \\
\end{eqnarray*}
$$
于是有
$$
\begin{eqnarray*}
p(t,T) &=& p(t,t+\mathrm{d}t) \mathscr{E}(p(t+\mathrm{d}t,T)) \\
\Rightarrow p(t, T) &=& \mathscr{E}(p(t+\mathrm{d}t,T)(1-r(t))\mathrm{d}t)
\end{eqnarray*}
$$
这样：$p(t+\mathrm{d}t,T)(1-r(t))\mathrm{d}t$的过程是无漂移的，应该有：
$$
\begin{eqnarray*}
p(t+\mathrm{d}t,T)(1-r(t))\mathrm{d}t -p(t,T) &=& p(t,T)\sigma_p(t,T)\mathrm{d}W\\
\Rightarrow \frac{\mathrm{d}p(t,T)}{p(t,T)} &=& r(t)\mathrm{d}t+\sigma_p(t,T) \mathrm{d}W
\end{eqnarray*}
$$
这个是显然的哈，看着很熟悉，同股票的形式是一样的。事实上，如果面对的是一个比较长期限的债券的期权，这基本上就够了。

下面以$f(t,u)$为建模目标，其中$f(t,u)$是在$t$时刻看到的$u$时候的瞬时利率$f(t,u) = - \frac{\partial \ln (p(t,u))}{\partial u}$ (注意对于变量$u$，这是个正常的函数，对等$t$，是随机过程)。于是(呵呵哒交换次序)：
$$
\begin{eqnarray*}
\mathrm{d}f(t,u) = -\frac{\partial }{\partial u} 
(
(r(t)+\frac{1}{2}\sigma_p^2(t,u))\mathrm{d}t + \sigma_p(t,u) \mathrm{d}W
)
\end{eqnarray*}
$$
这个式子是对的，但是并不是“有用的”，因为其中的关键是一切都被收在了$\sigma_p$中。既然要得到$f$的演化，那么不需要再多出来一个$p$的东西。从另外一个角度看。
$$
\begin{eqnarray*}
\ln(p(t,T)) = \int \limits_{t}^{T} f(t,u) \mathrm{d} u
\end{eqnarray*}
$$

## 利率作为期权标的的合法性

## 利率-利率影响

## 股票类期权中利率的影响
